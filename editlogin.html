<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Profile | SwiftCart</title>

<style>
    /* ... Your existing styles ... */
    *{ margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body{ background:#296C87; }
    header{ background:linear-gradient(135deg,#e0f7fa,#ffffff); padding:15px 5%; display:flex; justify-content:space-between; align-items:center; }
    .logo{ font-size:1.5rem; font-weight:bold; color:#00796b; text-decoration:none; }
    nav a{ margin-left:20px; text-decoration:none; color:#555; font-weight:500; }
    .profile-container{ max-width:600px; background:#fff; margin:40px auto; padding:30px; border-radius:15px; box-shadow:0 10px 25px rgba(0,0,0,0.15); }
    .profile-pic{ text-align:center; margin-bottom:20px; }
    .profile-pic img{ width:120px; height:120px; border-radius:50%; border:4px solid #80deea; object-fit: cover; }
    .profile-pic input{ margin-top:10px; }
    form label{ display:block; margin:15px 0 5px; font-weight:600; color:#333; }
    form input, textarea{ width:100%; padding:12px; border-radius:8px; border:1px solid #ccc; outline:none; }
    textarea{ resize:none; height:80px; }
    .save-btn{ margin-top:25px; width:100%; padding:12px; border:none; background:#00796b; color:#fff; font-size:1rem; font-weight:bold; border-radius:25px; cursor:pointer; transition:0.3s; }
    .save-btn:hover{ background:#004d40; }
    footer{ text-align:center; padding:20px; color:#fff; opacity:0.9; }
</style>
</head>

<body>

<header>
    <a href="index.html" class="logo">SwiftCart</a>
    <nav>
        <a href="index.html">Home</a>
        <a href="orders.html">Orders</a>
        <a href="account.html">Account</a>
    </nav>
</header>

<div class="profile-container">
    <h2 style="text-align:center; color:#00796b;">Edit Profile</h2>

    <div class="profile-pic">
        <img id="profile-display" src="https://via.placeholder.com/120" alt="Profile">
        <br>
        <input type="file" id="image-upload" accept="image/*">
    </div>

    <form id="profile-form">
        <label>Full Name</label>
        <input type="text" id="full-name" placeholder="Enter your name" required>

        <label>Email</label>
        <input type="email" id="email" placeholder="example@gmail.com" required>

        <label>Mobile Number</label>
        <input type="tel" id="mobile" placeholder="+91 XXXXX XXXXX">

        <label>Address</label>
        <textarea id="address" placeholder="Enter your full address"></textarea>

        <button type="submit" class="save-btn">Save Changes</button>
    </form>
</div>

<footer>
    Â© 2025 SwiftCart India
</footer>

<script>
    // 1. Handle Image Preview
    const imageUpload = document.getElementById('image-upload');
    const profileDisplay = document.getElementById('profile-display');

    imageUpload.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                profileDisplay.src = e.target.result;
                // Save image string to localStorage
                localStorage.setItem('swiftCart_avatar', e.target.result);
            }
            reader.readAsDataURL(file);
        }
    });

    // 2. Load Existing Data on Page Load
    window.onload = function() {
        const savedUser = JSON.parse(localStorage.getItem('swiftCart_user'));
        const savedAvatar = localStorage.getItem('swiftCart_avatar');

        if (savedUser) {
            document.getElementById('full-name').value = savedUser.name || '';
            document.getElementById('email').value = savedUser.email || '';
            document.getElementById('mobile').value = savedUser.mobile || '';
            document.getElementById('address').value = savedUser.address || '';
        }

        if (savedAvatar) {
            profileDisplay.src = savedAvatar;
        }
    };

    // 3. Handle Form Submission
    document.getElementById('profile-form').addEventListener('submit', function(e) {
        e.preventDefault(); // Stop page refresh

        const userData = {
            name: document.getElementById('full-name').value,
            email: document.getElementById('email').value,
            mobile: document.getElementById('mobile').value,
            address: document.getElementById('address').value,
            joined: "January 2024" // Static for this demo
        };

        // Save to LocalStorage
        localStorage.setItem('swiftCart_user', JSON.stringify(userData));

        alert("Profile updated successfully!");
        
        // Redirect back to Account page
        window.location.href = "account.html";
    });
</script>

</body>
</html>