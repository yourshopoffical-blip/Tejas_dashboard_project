<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Address | SwiftCart</title>
    <style>
        /* ... Your existing styles remain the same ... */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f4f9f9; color: #333; }
        .checkout-steps { display: flex; justify-content: center; padding: 30px 0; background: white; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .step { margin: 0 15px; font-size: 0.9rem; color: #aaa; font-weight: bold; }
        .step.active { color: #00796b; border-bottom: 2px solid #00796b; }
        .shipping-container { max-width: 800px; margin: 0 auto; padding: 0 20px 50px 20px; }
        .shipping-card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); }
        h2 { margin-bottom: 25px; color: #004d40; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 8px; color: #555; }
        input, select { width: 100%; padding: 12px; border: 1px solid #b2dfdb; border-radius: 8px; outline: none; transition: 0.3s; }
        input:focus { border-color: #4db6ac; box-shadow: 0 0 0 3px rgba(77, 182, 172, 0.1); }
        .btn-row { margin-top: 30px; display: flex; justify-content: space-between; align-items: center; }
        .back-link { text-decoration: none; color: #00796b; font-size: 0.9rem; font-weight: 600; }
        .continue-btn { background-color: #4db6ac; color: white; padding: 15px 40px; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; transition: 0.3s; text-decoration: none; }
        .continue-btn:hover { background-color: #00796b; transform: translateY(-2px); }
        .continue-btn:disabled { background-color: #ccc; cursor: not-allowed; }

        @media (max-width: 600px) {
            .form-grid { grid-template-columns: 1fr; }
            .full-width { grid-column: span 1; }
        }
    </style>
</head>
<body>

    <div class="checkout-steps">
        <span class="step">Login</span>
        <span class="step active">Shipping</span>
        <span class="step">Payment</span>
        <span class="step">Place Order</span>
    </div>

    <div class="shipping-container">
        <div class="shipping-card">
            <h2>Add a New Address</h2>
            
            <form id="shippingForm">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="fullname">Full name (First and Last name)</label>
                        <input type="text" id="fullname" placeholder="John Doe" required>
                    </div>

                    <div class="form-group full-width">
                        <label for="phone">Phone number</label>
                        <input type="tel" id="phone" placeholder="e.g. +1 234 567 8900" required>
                    </div>

                    <div class="form-group full-width">
                        <label for="address">Street address</label>
                        <input type="text" id="address" placeholder="Street address, P.O. box, company name" required>
                    </div>

                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" required>
                    </div>

                    <div class="form-group">
                        <label for="state">State / Province / Region</label>
                        <input type="text" id="state" required>
                    </div>

                    <div class="form-group">
                        <label for="zip">Zip Code</label>
                        <input type="text" id="zip" required>
                    </div>

                    <div class="form-group">
                        <label for="country">Country</label>
                        <select id="country">
                            <option value="United States">United States</option>
                            <option value="United Kingdom">United Kingdom</option>
                            <option value="India">India</option>
                            <option value="Canada">Canada</option>
                        </select>
                    </div>
                </div>

                <div class="btn-row">
                    <a href="cart.html" class="back-link">‚Üê Return to cart</a>
                    <button type="submit" class="continue-btn" id="submitBtn">Use this address</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('shippingForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.innerText = "Saving...";
            submitBtn.disabled = true;

            // Capture form data
            const shippingData = {
                fullname: document.getElementById('fullname').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                zip: document.getElementById('zip').value,
                country: document.getElementById('country').value
            };

            // Save to localStorage for use in Payment/Success pages
            localStorage.setItem('swiftCart_shipping', JSON.stringify(shippingData));

            // Small delay to simulate processing before redirecting
            setTimeout(() => {
                window.location.href = "payment.html"; 
            }, 800);
        });

        // Pre-fill form if data already exists in storage
        window.onload = () => {
            const savedData = JSON.parse(localStorage.getItem('swiftCart_shipping'));
            if (savedData) {
                document.getElementById('fullname').value = savedData.fullname || '';
                document.getElementById('phone').value = savedData.phone || '';
                document.getElementById('address').value = savedData.address || '';
                document.getElementById('city').value = savedData.city || '';
                document.getElementById('state').value = savedData.state || '';
                document.getElementById('zip').value = savedData.zip || '';
                document.getElementById('country').value = savedData.country || 'United States';
            }
        };
    </script>
</body>
</html>